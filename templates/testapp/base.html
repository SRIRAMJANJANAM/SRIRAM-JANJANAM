<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Sri Ram Janjanam{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="icon" href="{% static 'images/mod.jpg    ' %}">
    <style>
/* Chatbot Styles */
.chatbot-icon {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    background-color: #4a6fa5;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    transition: transform 0.3s ease;
}

.chatbot-icon:hover {
    transform: scale(1.1);
}

.chatbot-icon img {
    width: 30px;
    height: 30px;
}

.chatbot-container {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 320px;
    height: 440px;
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    display: none;
    flex-direction: column;
    z-index: 1001;
    overflow: hidden;
    animation: slideIn 0.3s ease-in-out;
}

@keyframes slideIn {
    from { transform: scale(0.9); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.chatbot-header {
    background-color: #4a6fa5;
    color: white;
    padding: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: bold;
    font-size: 16px;
}

.close-btn {
    cursor: pointer;
    font-size: 22px;
}

.chatbot-messages {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    background-color: #f9f9f9;
    scroll-behavior: smooth;
}

.message {
    margin-bottom: 10px;
    padding: 10px 12px;
    border-radius: 10px;
    max-width: 85%;
    font-size: 14px;
    line-height: 1.4;
}

.user-message {
    background-color: #d1ecf1;
    align-self: flex-end;
    margin-left: auto;
}

.bot-message {
    background-color: #f1f1f1;
    align-self: flex-start;
    margin-right: auto;
}

.chatbot-input {
    display: flex;
    padding: 10px;
    border-top: 1px solid #ddd;
    background-color: #fff;
}

.chatbot-input input {
    flex: 1;
    padding: 8px 10px;
    border: 1px solid #ccc;
    border-radius: 20px;
    font-size: 14px;
    outline: none;
}

.chatbot-input button {
    background-color: #4a6fa5;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 20px;
    margin-left: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.2s ease;
}

.chatbot-input button:hover {
    background-color: #3c5f8a;
}
</style>

</head>
<body>
   <nav>
    <h2>Sri Ram Janjanam</h2>
    <a href="/">Home</a>
    <a href="/about">About</a>
    <a href="/skills">Skills</a>
    <a href="/contact">Contact</a>
   </nav> <br> <br> <br> <br> <br>
   {% block body_block%}
   <div id="main">
    <h1 id="about">Hello, It's Me <br> <em>Sri Ram Janjanam</em><br>And I'm a <span id='bold'></span></h1>
    <h3 id="about1">I'm a Full-Stack Web Developer and I’m passionate about building responsive, user-friendly websites and applications, with a focus on clean code, performance, and scalability,I have experience in front-end, back-end  and Database technologies and many more.....</h3>
    <div id="img">
        <a href="https://www.linkedin.com/in/sri-ram-janjanam-0b4a86219/" target="_blank"><img src="{% static 'images/linkedin1.png' %}" id="social" title="Linkedin"></a>
        <a href="https://github.com/SRIRAMJANJANAM" target="_blank"> <img src="{% static 'images/git.png' %}" alt="" id="social" title="github" ></a>
        <a href="https://www.youtube.com/@Pythonwebdeveloper_1" target="_blank"> <img src="{% static 'images/yt.png' %}" alt="" id="social" title="Youtube"></a> <br>
        <h3><a href="/about">More About me</a></h3>
    </div>
    <div id="profile">
        <img src="{% static 'images/mod3.jpeg' %}" alt="" id="image" title="Sri Ram Janjanam">
    </div>
    <script>
        // The text to animate letter by letter
        const text = "Full-Stack Developer";
        const container = document.getElementById("bold");

        // Function to animate letters
        function animateLetters() {
            // Loop through each letter of the text
            for (let i = 0; i < text.length; i++) {
                // Create a span for each letter
                const span = document.createElement("span");
                span.classList.add("letter");
                span.innerText = text[i];
                container.appendChild(span);
                setTimeout(() => {
                    span.style.opacity = 3;
                }, 100 * i);
            }
        }
        animateLetters();
    </script>
    
   </div>

   {% endblock %}
   <!-- Chatbot Icon -->
<div class="chatbot-icon" id="chatbotIcon">
    <img src="{% static 'images/chat-icon.png' %}" alt="Chat">
</div>

<!-- Chatbot Container -->
<div class="chatbot-container" id="chatbotContainer">
    <div class="chatbot-header">
        <h3>Portfolio Assistant</h3>
        <span class="close-btn" id="closeChat">×</span>
    </div>
    <div class="chatbot-messages" id="chatMessages">
        <!-- Messages will appear here -->
    </div>
    <div class="chatbot-input">
        <input type="text" id="userInput" placeholder="Type a message...">
        <button id="sendMessage">Send</button>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const chatbotIcon = document.getElementById('chatbotIcon');
        const chatbotContainer = document.getElementById('chatbotContainer');
        const closeChat = document.getElementById('closeChat');
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendMessage');
        
        // Toggle chat window
        chatbotIcon.addEventListener('click', function() {
            chatbotContainer.style.display = chatbotContainer.style.display === 'flex' ? 'none' : 'flex';
        });
        
        closeChat.addEventListener('click', function() {
            chatbotContainer.style.display = 'none';
        });
        
        // Send message function
        function sendMessage() {
            const message = userInput.value.trim();
            if (message) {
                // Add user message to chat
                addMessage(message, 'user');
                userInput.value = '';
                
                // Send to server and get response
                fetch('/chat/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({message: message})
                })
                .then(response => response.json())
                .then(data => {
                    if (data.response) {
                        addMessage(data.response, 'bot');
                    } else if (data.error) {
                        addMessage('Sorry, I encountered an error.', 'bot');
                    }
                })
                .catch(error => {
                    addMessage('Sorry, I cannot respond at the moment.', 'bot');
                });
            }
        }
        
        // Add message to chat UI
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(sender + '-message');
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Event listeners
        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // Helper function to get CSRF token
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        
        // Add welcome message when chat is opened
        chatbotIcon.addEventListener('click', function() {
            if (chatMessages.children.length === 0) {
                addMessage("Hello! I'm your portfolio assistant. How can I help you?", 'bot');
            }
        }, {once: true});
    });
</script>
   





</body>
</html>
